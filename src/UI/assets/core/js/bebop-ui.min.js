!function(a,b){var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this),function(a,b,c,d,e,f){var g=a.Bebop=a.Bebop||{},h=g.Modules=g.Modules||{},i=g.Metaboxes=g.Metaboxes||{};g=function(){return{}}(),h.init=function(a){a||(a=[]);var c=a.container||d(b);d.each(c.find("[bebop-ui-el--postsearch]"),function(a,b){new h.PostSearch({el:b})}),d.each(c.find('[bebop-metabox="media-source"]'),function(a,b){new i.MediaSource({el:b})})},h.PostSearch=function(a){var b=a.el||null;if(b){var f=d(b),g=JSON.parse(f.attr("bebop-ui-el--postsearch")),h=e.template(g.templates.result),i=e.template(g.templates.selection),j={placeholder:g.placeholder,allowClear:!0,ajax:{url:g.url,dataType:"json",delay:250,data:function(a){return g.query.s=a.term,g.query.page=a.page,g.query},processResults:function(a,b){return b.page=b.page||1,g.mapping.id!==c&&(a.items=d.map(a.items,function(a){return a.id=a[g.mapping.id],a})),g.mapping.text!==c&&(a.items=d.map(a.items,function(a){return a.text=a[g.mapping.text],a})),{results:a.items,pagination:{more:a.meta.has_more}}}},escapeMarkup:function(a){return a},templateResult:function(a){return!a.id&&a.text&&(a.disabled||a.loading)?a.text:h(a)},templateSelection:function(a){return i(a)}};f.select2(j).on("init",function(a){var b=d(this),c=b.select2("data"),e=[];d.each(c,function(a,b){b.id&&e.push(b.id)}),e.length>0&&d.ajax({url:g.url,dataType:"json",data:{include:e.join(",")},success:function(a,c,e){a.items&&d.each(a.items,function(a,c){var d=c[g.mapping.id],e=c[g.mapping.text];b.find('option[value="'+d+'"]').text(e)}),b.trigger("change"),b.select2(j).trigger("change")}})}),f.find("option[selected]").length>0&&f.trigger("init")}},i.MediaSource=function(a){var b=a.el||null;if(b){var c=d(b),e=c.find('[bebop-metabox--media-source="selector"]'),f=c.find('[bebop-metabox--media-source="sources-container"]'),g=f.find("[bebop-metabox--media-source]");e.on("change",function(a){var b=d(this).val();d.each(g,function(a,c){var e=d(c);e.attr("bebop-metabox--media-source")==b?e.parents(".bebop-ui-mod").show():e.parents(".bebop-ui-mod").hide()}),f.is(":visible")||f.show()}),e.trigger("change")}},d(function(){d('[bebop-list--el="container"]').on("focusin",'[bebop-ui--el="datepicker"]',function(){d(this).datepicker({dateFormat:"M dd, yy"})}),h.init()})}(window,document,void 0,jQuery||$,_,Mustache);